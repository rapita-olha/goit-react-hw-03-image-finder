(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={searchForm:"SearchBar_searchForm__3Xn8F",button:"SearchBar_button__2XWtF",label:"SearchBar_label__C_Myh",input:"SearchBar_input__2nawN",searchBar:"SearchBar_searchBar__IEmu1"}},15:function(e,t,a){e.exports={image:"ImageGalleryItem_image__44u2w",item:"ImageGalleryItem_item__o5PU_"}},16:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1yUzS",Modal:"Modal_Modal__1N_5q"}},17:function(e,t,a){e.exports={button:"ButtonUp_button__B8dDE",visible:"ButtonUp_visible__1pfGC"}},30:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__2pkpJ"}},31:function(e,t,a){e.exports={button:"Button_button__1saQB",Button:"Button_Button__S5EgF"}},33:function(e,t,a){e.exports={grid:"App_grid__2B54T"}},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),c=a(2),i=a(3),l=a(6),u=a(5),h=a(8),d=(a(38),a(11)),p=a.n(d),b=a(1),m=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){var a=t.currentTarget.value;return e.setState({query:a})},e.handleSubmit=function(t){if(t.preventDefault(),""!==e.state.query.trim()){var a=e.state.query.trim().toLowerCase();e.props.onSubmit(a),e.setState({query:""}),t.currentTarget.reset()}else h.b.info("please type a query")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=p.a.searchBar,t=p.a.searchForm,a=p.a.button,n=p.a.label,r=p.a.input;return Object(b.jsx)("header",{className:e,children:Object(b.jsxs)("form",{className:t,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:a,onSubmit:this.handleSubmit,children:Object(b.jsx)("span",{className:n,children:"Search"})}),Object(b.jsx)("input",{className:r,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(n.Component),j=m,g=a(18),f=a(12),v=a(10),y=a.n(v),O=a(28),w=a.n(O),x=function(){function e(t,a){Object(c.a)(this,e),this.query="",this.page=1,this.key=t,this.baseUrl=a}return Object(i.a)(e,[{key:"fetchData",value:function(){var e=Object(f.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams({q:this.query,page:this.page,key:this.key}),a="".concat(this.baseUrl,"image_type=photo&orientation=horizontal&per_page=12&").concat(t),e.next=4,w.a.get(a);case 4:return n=e.sent,e.abrupt("return",n.data.hits);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){this.page=1}},{key:"incrementPage",value:function(){this.page+=1}},{key:"searchQuery",get:function(){return this.searchQuery},set:function(e){this.query=e}}]),e}(),k=(a(60),a(29)),_=a.n(k),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)(_.a,{type:"Oval",color:"#da5f01",height:80,width:80,style:{margin:"0 auto"}})}}]),a}(r.a.Component),B=a.p+"static/media/error-img.64aecb11.png";function C(){return Object(b.jsx)("div",{style:{paddingTop:"100px"},children:Object(b.jsx)("img",{src:B,alt:"welcome",width:600,style:{margin:"0 auto"}})})}var M=a.p+"static/media/welcome-sign.ae2661a0.jpg";function I(){return Object(b.jsx)("div",{style:{paddingTop:"100px"},children:Object(b.jsx)("img",{src:M,alt:"welcome",width:800,style:{margin:"0 auto"}})})}var N=a(15),q=a.n(N),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.image,t=e.webformatURL,a=e.tags,n=q.a.image,r=q.a.item;return Object(b.jsx)("li",{className:r,children:Object(b.jsx)("img",{src:t,alt:a,className:n})})}}]),a}(n.Component),U=L,G=a(30),T=a.n(G),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.trackScroll;window.addEventListener("scroll",e)}},{key:"componentWillUnmount",value:function(){var e=this.props.trackScroll;window.removeEventListener("scroll",e)}},{key:"render",value:function(){var e=this.props.images,t=T.a.gallery;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{className:t,onClick:this.props.handleOpenModal,children:e&&e.map((function(e){return Object(b.jsx)(U,{image:e},e.id)}))})})}}]),a}(n.Component),P=a(31),A=a.n(P),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.onClick,t=A.a.button;return Object(b.jsx)("button",{type:"button",className:t,onClick:e,children:Object(b.jsx)("span",{children:"Show more"})})}}]),a}(n.Component),F=a(16),Q=a.n(F),R=document.querySelector("#modal-root"),J=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleGalleryNav=function(t){var a=t.code,n=e.props,r=n.imgIdx,o=n.closeModal,s=n.handleGalleryNav;switch(a){case"Escape":o();break;case"ArrowRight":s(r+1);break;case"ArrowLeft":s(r-1);break;default:h.b.info("Press ESC to exit")}},e.handleBackdropClick=function(t){var a=t.target,n=t.currentTarget,r=e.props.closeModal;a===n&&r()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleGalleryNav)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleGalleryNav)}},{key:"render",value:function(){var e=Q.a.modal,t=Q.a.overlay,a=this.props.children;return Object(o.createPortal)(Object(b.jsx)("div",{className:t,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:e,children:a})}),R)}}]),a}(n.Component),W=J,z=a(32),H=a.n(z),V=a.p+"static/media/up-arrow.79fd32b5.png",X=a(17),Y=a.n(X),K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.isVisible,n=Y.a.button,r=Y.a.visible;return Object(b.jsx)("button",{type:"button",className:a?H()(n,r):n,onClick:t,children:Object(b.jsx)("img",{src:V,alt:"go up"})})}}]),a}(n.Component),Z=new x("23099958-a9e73d010620c28e46bfb8a54","https://pixabay.com/api/?"),$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],error:null,showModal:!1,showGoUpBtn:!1,showLoadMoreBtn:!1,showLoader:!1,activeIdx:null,status:"idle"},e.resetSearchParams=function(){var t=e.props.query;Z.searchQuery=t,Z.resetPage(),e.setState({images:[]})},e.showImages=Object(f.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({showLoader:!0}),t.prev=1,t.next=4,Z.fetchData();case 4:if(0!==(a=t.sent).length){t.next=9;break}return h.b.warning("Sorry, we couldn't find anything"),e.setState({status:"idle"}),t.abrupt("return");case 9:e.setState((function(e){var t=e.images;return{images:[].concat(Object(g.a)(t),Object(g.a)(a)),status:"resolved",showLoader:!1}})),Z.incrementPage(),e.state.images.length>12&&e.scrollDown(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),e.setState({error:t.t0,status:"rejected"}),h.b.error("Something went wrong...(");case 18:case"end":return t.stop()}}),t,null,[[1,14]])}))),e.scrollDown=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.trackScroll=function(){var t=window.pageYOffset,a=document.documentElement.clientHeight;t>a&&e.setState({showGoUpBtn:!0}),t<a&&e.setState({showGoUpBtn:!1})},e.goBackToTop=function(){window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e.goBackToTop,0))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.handleOpenModal=function(t){var a=t.target;"IMG"===a.nodeName&&(e.findActiveIdx(a.src),e.toggleModal())},e.findActiveIdx=function(t){e.state.images.forEach((function(a,n){a.webformatURL===t&&e.setState({activeIdx:n})}))},e.showNextImage=function(t){var a=e.state.images;t===a.length?e.setState({activeIdx:0}):-1===t?e.setState({activeIdx:a.length-1}):e.setState({activeIdx:t})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.query,n=this.state.images;e.query!==a&&(this.resetSearchParams(),this.showImages()),t.images!==n&&n&&n.length>=12&&this.setState({showLoadMoreBtn:!0}),t.images!==n&&n&&n.length<12&&this.setState({showLoadMoreBtn:!1})}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.images,n=e.showModal,r=e.activeIdx,o=e.showGoUpBtn,s=e.showLoadMoreBtn,c=e.showLoader;return"idle"===t?Object(b.jsx)(I,{}):"rejected"===t?Object(b.jsx)(C,{}):"resolved"===t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{images:a,showImages:this.showImages,handleOpenModal:this.handleOpenModal,trackScroll:this.trackScroll}),c&&Object(b.jsx)(S,{}),s&&Object(b.jsx)(D,{onClick:this.showImages}),Object(b.jsx)(K,{onClick:this.goBackToTop,isVisible:o}),n&&Object(b.jsx)(W,{imgIdx:r,closeModal:this.toggleModal,handleGalleryNav:this.showNextImage,children:Object(b.jsx)("img",{src:a[r].largeImageURL,alt:a[r].tags,width:1e3})})]}):void 0}}]),a}(n.Component),ee=$,te=a(33),ae=a.n(te),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.setQuery=function(t){e.setState({query:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=ae.a.grid;return Object(b.jsxs)("div",{className:e,children:[Object(b.jsx)(j,{onSubmit:this.setQuery}),Object(b.jsx)(ee,{query:this.state.query}),Object(b.jsx)(h.a,{autoClose:3e3,theme:"dark"})]})}}]),a}(n.Component),re=ne;a(81);s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(re,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.c581ea27.chunk.js.map